FROM restreamio/gstreamer:dev-dependencies

ARG GSTREAMER_REPOSITORY=https://gitlab.freedesktop.org/philn/gstreamer.git

# 1.20-studio-rebase-220825 branch
ARG GSTREAMER_CHECKOUT=7278621f3d1534cdf9cf95dc335883182661c8b9

ARG GST_PLUGINS_RS_REPOSITORY=https://gitlab.freedesktop.org/gstreamer/gst-plugins-rs.git
ARG GST_PLUGINS_RS_CHECKOUT=c6238a6a9f35c34e8bd4f8f4ccc727a5f8c0e6b1

ARG LIBWPE_VERSION=1.12.0
ARG WPEBACKEND_FDO_VERSION=1.12.0
ARG WPEWEBKIT_VERSION=2.36.1

ARG GSTREAMER_CEF_REPOSITORY=https://github.com/centricular/gstcefsrc
ARG GSTREAMER_CEF_CHECKOUT=444e84264869cf668fe2cb1d4d9b4717f49ae37c

COPY docker/sccache.toml /sccache.toml

COPY docker/build-gstreamer/download /download

RUN ["/download"]

COPY docker/build-gstreamer/compile /compile
